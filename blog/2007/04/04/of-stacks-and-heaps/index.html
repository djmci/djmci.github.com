<!DOCTYPE html>
<!--[if IE 7]>
<html id="ie7" dir="ltr" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" dir="ltr" lang="en-US">
<![endif]-->
<!--[if IE 9]>
<html id="ie9" dir="ltr" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8) | !(IE 9)  ]><!-->
<html dir="ltr" lang="en-US">
<!--<![endif]-->
<head>
<base href="/blog" />

<meta charset="UTF-8" />
<title>Of Stacks and Heaps | shiftperception.com</title>

<link rel="stylesheet" href="/blog/wp-content/themes/pink-touch-sp/style.css" type="text/css" media="screen" />

<meta name='robots' content='noindex,nofollow' />



<link rel='stylesheet' id='arvo-css'  href='http://fonts.googleapis.com/css?family=Arvo%3A400%2C700&#038;ver=3.3.1' type='text/css' media='all' />
<script type='text/javascript' src='/blog/wp-includes/js/comment-reply.js?ver=20090102'></script>

 

<link rel='next' title='SmartSketch' href='/blog/2007/04/13/smartsketch/' />

<link rel='canonical' href='/blog/2007/04/04/of-stacks-and-heaps/' />
<link rel='shortlink' href='/blog/?p=91' />
</head>

<body class="single single-post postid-91 single-format-standard">
	<div id="wrapper">
		<div id="navigation">
			<div class="wrapper wide-wrapper clearfix">
				<div id="nav-menu" class="menu-postacrds-container"><ul id="menu-postacrds" class="menu"><li id="menu-item-893" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-893"><a href="/">Home</a></li>
<li id="menu-item-892" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-892"><a href="/blog/projects/">Projects</a></li>
<li id="menu-item-884" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-884"><a href="/blog/category/postacrds/">Postcards</a></li>
<li id="menu-item-886" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-886"><a href="/blog/category/development/">Development</a></li>
<li id="menu-item-887" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-887"><a href="/blog/category/interaction/">Interaction</a></li>
<li id="menu-item-888" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-888"><a href="/blog/category/design/">Design</a></li>
<li id="menu-item-889" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-889"><a href="/blog/category/thoughts/">Thoughts</a></li>
<li id="menu-item-890" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-890"><a href="/blog/category/desktops/">Desktops</a></li>
<li id="menu-item-891" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-891"><a href="/blog/category/essays/">Essays</a></li>
</ul></div>			</div>
		</div><!-- /#navigation -->
		<div id="navigation-frill"></div>

		<div id="header">
			<p class="blog-tag"><a href="/blog/" title="shiftperception.com" rel="home">shiftperception.com</a></p>

			<div id="description">
				<p></p>
			</div>
		</div><!-- /#header -->

		<div id="content">


	
<div id="post-91" class="post-91 post type-post status-publish format-standard hentry category-development tag-web-dev tag-programing">
		<div class="date">
		<a href="/blog/2007/04/04/of-stacks-and-heaps/" title="Permalink to Of Stacks and Heaps" rel="bookmark">
							<p><span class="day">04</span>Apr / 2007</p>
					</a>
	</div>
	
	<div class="content">
		<h1 class="entry-title"><a href="/blog/2007/04/04/of-stacks-and-heaps/" title="Permalink to Of Stacks and Heaps" rel="bookmark">Of Stacks and Heaps</a></h1>

		<div class="entry-content">
			<p>OK, so I may not be a hard-core programmer like some in th room (you know who you are), but there are times when I really enjoy understanding just that little bit more about the (computer) world we live in today. So it was a very pleasant time spent on <a href="http://kirupa.com">Kirupa</a> this evening, learning and understanding (I <em>think</em>) about how memory is allocated based on my hacked together code. All very interesting, and perhaps someone can tell me if it&#8217;s all correct?</p>
<p><a href="http://www.kirupa.com/net/stacks_heaps_pg1.htm">Stacks and Heaps</a></p>
								</div><!-- .entry-content -->
	</div><!-- .content -->

		<div class="info">
					<p class="category-list">
				Posted in <a href="/blog/category/development/" title="View all posts in Development" rel="category tag">Development</a>			</p>
		
		<p class="tag-list">Tags: <a href="/blog/tag/web-dev/" rel="tag">Development</a>, <a href="/blog/tag/programing/" rel="tag">Programing</a></p>
		<p>
			<span class="permalink"><a href="/blog/2007/04/04/of-stacks-and-heaps/" title="Permalink to Of Stacks and Heaps" rel="bookmark">Permalink</a></span>

							<span class="notes"><a href="/blog/2007/04/04/of-stacks-and-heaps/#comments" title="Comment on Of Stacks and Heaps"><span class="dsq-postid" rel="91 /blog/2007/04/04/of-stacks-and-heaps/">4 Comments</span></a></span>
					</p>

			</div>
</div><!-- /.post -->
	<div class="pagination">
		<p class="clearfix">
			<a href="/blog/2007/03/25/labs-soft-launch/" rel="prev"><span class="older"><span class="meta-nav">&larr;</span> Previous post</span></a>			<a href="/blog/2007/04/13/smartsketch/" rel="next"><span class="newer">Next post <span class="meta-nav">&rarr;</span></span></a>		</p>
	</div>

	
<div id="disqus_thread">
                    <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-2982">
        <div id="dsq-comment-header-2982" class="dsq-comment-header">
            <cite id="dsq-cite-2982">
http://rant.blackapache.net/                <span id="dsq-author-user-2982">OJ</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2982" class="dsq-comment-body">
            <div id="dsq-comment-message-2982" class="dsq-comment-message"><p>I have no idea who you&#8217;re referring to, but whoever he/she is I hope they post! As I&#8217;d be interested in what they&#8217;ve got to say <img src='/blog/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>The article isn&#8217;t bad. I think some of the bits are a little misleading, and some other bits arent explained well enough.</p>
<p>Since this article is very .NET specific isn&#8217;t not really safe to assume that the rules stated in the article are correct for other languages (in fact, they&#8217;re not <img src='/blog/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> ).</p>
<p>So, a few points:</p>
<p><b>Code Snippets</b><br />
The code snippets that he&#8217;s posted are technically uncompilable, because the bodies of the functions need to be included in the class scope:</p>
<p><code>// this is wrong<br />
class Simpsons<br />
{<br />
&nbsp;&nbsp;public string name;<br />
&nbsp;&nbsp;public int age;<br />
}<br />
<br />
public void People()<br />
{<br />
&nbsp;&nbsp;Simpsons bart = new Simpsons();<br />
&nbsp;&nbsp;bart.name = "Bart";<br />
&nbsp;&nbsp;bart.age = 10;<br />
}<br />
<br />
// this is right<br />
class Simpsons<br />
{<br />
&nbsp;&nbsp;public string name;<br />
&nbsp;&nbsp;public int age;<br />
<br />
&nbsp;&nbsp;public void People()<br />
&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;Simpsons bart = new Simpsons();<br />
&nbsp;&nbsp;&nbsp;&nbsp;bart.name = "Bart";<br />
&nbsp;&nbsp;&nbsp;&nbsp;bart.age = 10;<br />
&nbsp;&nbsp;}<br />
}</code></p>
<p><b>Value vs Reference</b><br />
The author stated that reference (class) types are always on the heap &#8211; which in .NET they are.  But what they fail to state is <em>why</em> they&#8217;re on the heap.  The reason for this is simple. In C# (and VB.NET), all class types have to be instantiated using the <strong>new</strong> keyword.  This keyword is what forces allocation of the object on the heap, not the stack.  If you call &#8216;new&#8217;, you get heap, if you don&#8217;t, you get stack.  So if you look at the above code snippet, the <em>instance</em> of &#8216;bart&#8217; is stored on the heap, but the <em>reference</em> (ie. the variable) &#8216;bart&#8217; is stored on the stack.  So &#8216;bart&#8217;, which is on the stack, references an instance of &#8216;Simpsons&#8217; which is on the heap.</p>
<p>In other languages, such as C++, it can be different. Observe:<br />
<code><br />
class Simpsons<br />
{<br />
public:<br />
&nbsp;&nbsp;string name;<br />
&nbsp;&nbsp;int age;<br />
};<br />
<br />
int main()<br />
{<br />
&nbsp;&nbsp;Simpsons bart; // totally allocated on the stack<br />
&nbsp;&nbsp;Simpsons* bort = new Simpsons(); // reference on stack, instance on heap<br />
&nbsp;&nbsp;return 0;<br />
}</code></p>
<p>So it&#8217;s possible, and very common, that class instances are stored on the stack as well &#8211; they&#8217;re not only tied to the heap.  The key, again, is the <strong>new</strong> keyword.</p>
<p>So in a nutshell, just be mindful that it will vary from language to language.</p>
<p><b>Garbage Collection</b><br />
This is available in a stack of languages, but not available in others. C and C++ are the common ones which don&#8217;t have their own garbage collector (managed C++ does, but only if you use managed objects and <em>gcnew</em> instead of <em>new</em>).  If you use <em>new</em> or <em>malloc()</em> you have to make sure you clean up your objects manually via <em>delete</em> and <em>free</em>.</p>
<p>Other than that, it&#8217;s a pretty good primer for those new to memory allocation and stacks/heaps.</p>
<p>Lots of love!<br />
OJ <img src='/blog/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
        </div>
    </li>

    </li>
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-2985">
        <div id="dsq-comment-header-2985" class="dsq-comment-header">
            <cite id="dsq-cite-2985">
http://blog.kirupa.com                <span id="dsq-author-user-2985">Kirupa</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2985" class="dsq-comment-body">
            <div id="dsq-comment-message-2985" class="dsq-comment-message"><p>Hi OJ &#8211; I definitely agree with your assessment of the article, but the code provided does work: <a href="http://www.kirupa.com/temp/Program.txt" rel="nofollow">http://www.kirupa.com/temp/Program.txt</a></p>
<p>Since running the code wasn&#8217;t a focus of the article, I skipped the parent class/namespace/import data that would normally be in it. So, yes, copying and pasting the code into Visual Studio wouldn&#8217;t work, but the reason is because the parent class was simply omitted. </p>
<p>Concerning the breadth of details, I wrote this article with the goal of providing a basic overview of how some of the things behind the scenes work. </p>
<p>As such, I deliberately had to leave out a lot of the details such as many &#8220;why is it done that way&#8221; snippets because I felt that would be too much for readers who are learning about this for the first time to absorb.</p>
<p>If you want to write a follow-up article that contains more details, I&#8217;d be very happy to post your article on the site. More info here: <a href="http://www.kirupa.com/developer/tutorials.htm" rel="nofollow">http://www.kirupa.com/developer/tutorials.htm</a> </p>
<p>Cheers!<br />
Kirupa <img src='/blog/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
        </div>
    </li>

    </li>
    <li class="comment even thread-even depth-1" id="dsq-comment-2987">
        <div id="dsq-comment-header-2987" class="dsq-comment-header">
            <cite id="dsq-cite-2987">
http://rant.blackapache.net/                <span id="dsq-author-user-2987">OJ</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2987" class="dsq-comment-body">
            <div id="dsq-comment-message-2987" class="dsq-comment-message"><p>Hi Kirupa!</p>
<p>Great comment, it backs up your article nicely.  I&#8217;d love to write something to build on the foundation that your provided in your article, and I appreciate the offer to have it posted on your site.</p>
<p>I&#8217;ll aim to get an structure together, along with some ideas for content that will work well with what you&#8217;ve already presented, in the next week or so. I&#8217;ll be sure to keep you posted.</p>
<p>Love ya work! I&#8217;ll be in touch.</p>
<p>Cheers <img src='/blog/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /><br />
OJ</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1" id="dsq-comment-2988">
        <div id="dsq-comment-header-2988" class="dsq-comment-header">
            <cite id="dsq-cite-2988">
                <span id="dsq-author-user-2988">dan</span>
            </cite>
        </div>
        <div id="dsq-comment-body-2988" class="dsq-comment-body">
            <div id="dsq-comment-message-2988" class="dsq-comment-message"><p>Hey guys, </p>
<p>OJ &#8211; look forward to seeing what you produce</p>
<p>Kirupa &#8211; Thanks for stopping by, I don&#8217;t know how you find the time to do everything you do, but it&#8217;s great to see you getting around and reading comments and replying. And thanks for a great resource in Kirupa.com. In the middle of pouring over Senoculars AS3.0 tips. Genious!</p>
</div>
        </div>
    </li>

    </li>
            </ul>


        </div>

    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = '/blog/2007/04/04/of-stacks-and-heaps/';
    var disqus_identifier = '91 /blog/2007/04/04/of-stacks-and-heaps/';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'djmci';
    var disqus_title = "Of Stacks and Heaps";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /*
           All currently supported events:
            * preData â€” fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=91');
        });
                    };
    var facebookXdReceiverPath = '/blog/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/alien.local\/~dan\/shiftperception\/blog\/2007\/04\/04\/of-stacks-and-heaps\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.70';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>


		</div><!-- /#content -->
	</div><!-- /#wrapper -->

	<div id="footer-frill"></div>
	<div id="footer">
		<div class="wrapper">
		
<div id="widgets" class="clearfix three">
		<div id="first" class="widget-area">
				<div id="recent-posts-2" class="clearfix widget widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
				<li><a href="/blog/2009/11/09/experimenting-with-typekit-com/" title="Experimenting with TypeKit.com">Experimenting with TypeKit.com</a></li>
				<li><a href="/blog/2009/09/05/trespassers-will-be-electrocuted/" title="Trespassers will be electrocuted!">Trespassers will be electrocuted!</a></li>
				<li><a href="/blog/2009/07/05/poster-collection-2-agam/" title="Poster Collection &#8211; 2 &#8211; AGAM">Poster Collection &#8211; 2 &#8211; AGAM</a></li>
				<li><a href="/blog/2009/07/05/le-tour-de-adobe/" title="Le Tour de Adobe">Le Tour de Adobe</a></li>
				<li><a href="/blog/2009/06/16/unique-records-in-as3/" title="Unique records in AS3">Unique records in AS3</a></li>
				</ul>
		</div>	</div><!-- #first .widget-area -->
	
		<div id="second" class="widget-area">
		<div id="categories-2" class="clearfix widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-2"><a href="/blog/category/design/" title="View all posts filed under Design">Design</a>
</li>
	<li class="cat-item cat-item-8"><a href="/blog/category/desktops/" title="View all posts filed under Desktops">Desktops</a>
</li>
	<li class="cat-item cat-item-3"><a href="/blog/category/development/" title="View all posts filed under Development">Development</a>
</li>
	<li class="cat-item cat-item-48"><a href="/blog/category/essays/" title="View all posts filed under Essays">Essays</a>
</li>
	<li class="cat-item cat-item-10"><a href="/blog/category/interaction/" title="View all posts filed under Interaction">Interaction</a>
</li>
	<li class="cat-item cat-item-1"><a href="/blog/category/postacrds/" title="View all posts filed under Postacrds">Postacrds</a>
</li>
	<li class="cat-item cat-item-12"><a href="/blog/category/thoughts/" title="View all posts filed under Thoughts">Thoughts</a>
</li>
		</ul>
</div>	</div><!-- #second .widget-area -->
	
		<div id="third" class="widget-area">
		<div id="archives-3" class="clearfix widget widget_archive"><h3 class="widget-title">Archives</h3>		<select name="archive-dropdown" onchange='document.location.href=this.options[this.selectedIndex].value;'> <option value="">Select Month</option> 	<option value='/blog/2009/11/'> November 2009 &nbsp;(1)</option>
	<option value='/blog/2009/09/'> September 2009 &nbsp;(1)</option>
	<option value='/blog/2009/07/'> July 2009 &nbsp;(2)</option>
	<option value='/blog/2009/06/'> June 2009 &nbsp;(2)</option>
	<option value='/blog/2009/05/'> May 2009 &nbsp;(1)</option>
	<option value='/blog/2008/05/'> May 2008 &nbsp;(1)</option>
	<option value='/blog/2008/03/'> March 2008 &nbsp;(1)</option>
	<option value='/blog/2008/02/'> February 2008 &nbsp;(3)</option>
	<option value='/blog/2007/12/'> December 2007 &nbsp;(1)</option>
	<option value='/blog/2007/11/'> November 2007 &nbsp;(1)</option>
	<option value='/blog/2007/10/'> October 2007 &nbsp;(2)</option>
	<option value='/blog/2007/09/'> September 2007 &nbsp;(1)</option>
	<option value='/blog/2007/08/'> August 2007 &nbsp;(3)</option>
	<option value='/blog/2007/07/'> July 2007 &nbsp;(3)</option>
	<option value='/blog/2007/06/'> June 2007 &nbsp;(3)</option>
	<option value='/blog/2007/05/'> May 2007 &nbsp;(3)</option>
	<option value='/blog/2007/04/'> April 2007 &nbsp;(4)</option>
	<option value='/blog/2007/03/'> March 2007 &nbsp;(4)</option>
	<option value='/blog/2007/02/'> February 2007 &nbsp;(9)</option>
	<option value='/blog/2007/01/'> January 2007 &nbsp;(2)</option>
	<option value='/blog/2006/12/'> December 2006 &nbsp;(14)</option>
	<option value='/blog/2006/11/'> November 2006 &nbsp;(13)</option>
	<option value='/blog/2006/10/'> October 2006 &nbsp;(17)</option>
	<option value='/blog/2006/09/'> September 2006 &nbsp;(17)</option>
	<option value='/blog/2006/08/'> August 2006 &nbsp;(3)</option>
	<option value='/blog/2006/07/'> July 2006 &nbsp;(1)</option>
	<option value='/blog/2001/04/'> April 2001 &nbsp;(1)</option>
 </select>
</div><div id="search-3" class="clearfix widget widget_search"><form method="get" id="searchfield" action="/blog/">
	<input name="s" type="text" onfocus="if ( this.value=='Search' ) this.value='';" onblur="if ( this.value=='' ) this.value='Search';" value="Search" />
</form>
</div>	</div><!-- #third .widget-area -->
	</div><!-- #widgets -->			<!--<p class="info-theme" role="contentinfo"><a href="http://wordpress.org/" rel="generator">Proudly powered by WordPress</a><span class="sep"> | </span>Theme: Pink Touch 2 by <a href="http://automattic.com/" rel="designer">Automattic</a>.</p>-->
		</div>
	</div>


</body>
</html>
